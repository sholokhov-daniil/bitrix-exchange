(function(){"use strict";var e={4250:function(e,t,a){var l=a(1114),o=a(5130),n=a(6768),u=a(4232),r=a(144);const i={class:"ui-ctl ui-ctl-checkbox"},c=["name"],s={class:"ui-ctl-label-text"};var d={__name:"checkbox-field",props:{modelValue:{type:Boolean,default:()=>!1},name:{type:String,required:!0},label:{type:String,default:()=>""}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t,l=e,r=(0,n.EW)({get(){return l.modelValue},set(e){a("update:modelValue",e)}});return(t,a)=>((0,n.uX)(),(0,n.CE)("label",i,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),name:e.name,type:"checkbox",class:"ui-ctl-element"},null,8,c),[[o.lH,r.value]]),(0,n.Lk)("div",s,(0,u.v_)(e.label),1)]))}};const p=d;var m=p;const v={class:"ui-ctl ui-ctl-textbox"};var h={__name:"input-hash-field",props:{modelValue:{type:String,default:()=>""},name:{type:String,required:!0},label:{type:String,default:()=>""}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t,l=e,u=(0,n.EW)({get(){return l.modelValue},set(e){a("update:modelValue",e)}}),r=()=>{BX.ajax.runAction("sholokhov:exchange.SecureController.generateHash").then(e=>a("update:modelValue",e.data)).catch(()=>alert("Ошибка генерации идентификатора"))};return(e,t)=>((0,n.uX)(),(0,n.CE)("div",v,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),type:"text",class:"ui-ctl-element"},null,512),[[o.Jo,u.value]]),(0,n.Lk)("span",{class:"hash-text-generator",onClick:r},"Сгенерировать")]))}};const f=h;var E=f;function g(e,t){return _(e)?BX.Loc.getMessage(e,t):""}function _(e){return BX.Loc.hasMessage(e)}const V={width:"60%"},b={width:"40%"},y={width:"60%"};var k={__name:"general-block",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t,l=e,o=(0,n.EW)({get(){return l.modelValue},set(e){a("update:modelValue",e)}});return(e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("tr",null,[t[2]||(t[2]=(0,n.Lk)("td",{width:"40%"},null,-1)),(0,n.Lk)("td",V,[(0,n.bF)(m,{modelValue:o.value.active,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.active=e),label:(0,r.R1)(g)("SHOLOKHOV_EXCHANGE_SETTINGS_ENTITY_UI_GENERAL_TITLE_FIELD_ACTIVE"),name:"active"},null,8,["modelValue","label"])])]),(0,n.Lk)("tr",null,[(0,n.Lk)("td",b,(0,u.v_)((0,r.R1)(g)("SHOLOKHOV_EXCHANGE_SETTINGS_ENTITY_UI_GENERAL_TITLE_FIELD_HASH")),1),(0,n.Lk)("td",y,[(0,n.bF)(E,{modelValue:o.value.hash,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.hash=e),name:"hash"},null,8,["modelValue"])])])],64))}};const L=k;var S=L;a(8111),a(1701);const w={class:"ui-ctl ui-ctl-after-icon ui-ctl-dropdown"},O={class:"ui-ctl-after ui-ctl-icon-angle"},T=["name"],C={value:""},x=["value"];var A={__name:"select-field",props:{modelValue:{type:String,default:()=>null},name:{type:String,required:!0},attributes:{type:Object,default:()=>{}},api:{type:Object,default:()=>{}},values:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t,l=e,i=(0,r.Kh)({enums:[]});(0,n.sV)(()=>{l.api?.action?s():l.values&&(i.enums=l.values)});const c=(0,n.EW)({get(){return l.modelValue},set(e){a("update:modelValue",e)}});(0,n.wB)(()=>l.api,()=>s(),{deep:!0}),(0,n.wB)(()=>l.values,e=>i.enums=e);const s=()=>{BX.ajax.runAction(l.api.action,{data:l.api?.data||{}}).then(e=>{l.api?.callback&&(e=l.api?.callback(e)),i.enums=Array.isArray(e.data)?e.data:[]}).catch(e=>{console.error(e),alert(`Ошибка получения значений списка "${options.title}"`)})};return(t,a)=>((0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("div",O,[(0,n.bo)((0,n.Lk)("select",(0,n.v6)({"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),name:e.name,class:"ui-ctl-element"},e.attributes),[(0,n.Lk)("option",C,(0,u.v_)((0,r.R1)(g)("SHOLOKHOV_EXCHANGE_SETTINGS_SELECT_SELECTED_VALUE")),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.enums,e=>((0,n.uX)(),(0,n.CE)("option",{key:e.value,value:e.value},(0,u.v_)(e.name),9,x))),128))],16,T),[[o.u1,c.value]])])]))}};const I=A;var X=I;const H={width:"40%"},N={width:"60%"};var j={__name:"target-block",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t,l=e;(0,r.Kh)({targets:[],fields:[]});const o=(0,n.EW)({get(){return l.modelValue},set(e){a("update:modelValue",e)}}),i=(0,n.EW)(()=>({action:"sholokhov:exchange.EntityController.getByType",data:{code:"target"},callback:c}));(0,n.wB)(()=>l.modelValue.type,e=>s(e));const c=e=>(console.log(e),Array.isArray(e.data)&&(e.data=e.data.map(e=>({value:e.CODE,name:e.NAME}))),e),s=e=>{BX.ajax.runAction("sholokhov:exchange.EntityController.getFields",{data:{code:e}}).then(e=>{console.log(e)}).catch(()=>console.error(response))};return(e,t)=>((0,n.uX)(),(0,n.CE)("tr",null,[(0,n.Lk)("td",H,(0,u.v_)((0,r.R1)(g)("SHOLOKHOV_EXCHANGE_SETTINGS_ENTITY_UI_TARGET_TITLE_FIELD_TYPE")),1),(0,n.Lk)("td",N,[(0,n.bF)(X,{modelValue:o.value.type,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.type=e),api:i.value,name:"type"},null,8,["modelValue","api"])])]))}};const F=j;var G=F,U={__name:"App",props:{teleport:{type:Object,required:!0},formContainer:{type:String,required:!0},signed:{type:String,required:!1,default:()=>""}},setup(e){const t=e,a=(0,r.Kh)({form:{general:{},target:{},source:{},map:{}}});(0,n.sV)(()=>l());const l=()=>{console.log(t);const e=document.querySelector(t.formContainer);e&&e.addEventListener("submit",e=>o(e))},o=e=>{e.preventDefault(),e.stopImmediatePropagation()};return(t,l)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.eW)((0,u.v_)(a.form)+" ",1),e.teleport.general?((0,n.uX)(),(0,n.Wv)(n.Im,{key:0,to:e.teleport.general},[(0,n.bF)(S,{modelValue:a.form.general,"onUpdate:modelValue":l[0]||(l[0]=e=>a.form.general=e)},null,8,["modelValue"])],8,["to"])):(0,n.Q3)("",!0),e.teleport.target?((0,n.uX)(),(0,n.Wv)(n.Im,{key:1,to:e.teleport.target},[(0,n.bF)(G,{modelValue:a.form.target,"onUpdate:modelValue":l[1]||(l[1]=e=>a.form.target=e)},null,8,["modelValue"])],8,["to"])):(0,n.Q3)("",!0)],64))}};const B=U;var K=B;window.Sholokhov||(window.Sholokhov={}),window.Sholokhov.Exchange||(window.Sholokhov.Exchange={}),window.Sholokhov.Exchange.Detail||(window.Sholokhov.Exchange.Detail=new class{constructor(){(0,l.A)(this,"_app",void 0)}mounted(e,t){console.log(BX.Loc.getMessage("LANGUAGE_ID")),this._app=(0,o.Ef)(K,t),this._app.mount(e)}unmount(){this._app?.unmount()}})}},t={};function a(l){var o=t[l];if(void 0!==o)return o.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,o,n){if(!l){var u=1/0;for(s=0;s<e.length;s++){l=e[s][0],o=e[s][1],n=e[s][2];for(var r=!0,i=0;i<l.length;i++)(!1&n||u>=n)&&Object.keys(a.O).every(function(e){return a.O[e](l[i])})?l.splice(i--,1):(r=!1,n<u&&(u=n));if(r){e.splice(s--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var s=e.length;s>0&&e[s-1][2]>n;s--)e[s]=e[s-1];e[s]=[l,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,n,u=l[0],r=l[1],i=l[2],c=0;if(u.some(function(t){return 0!==e[t]})){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(i)var s=i(a)}for(t&&t(l);c<u.length;c++)n=u[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(s)},l=self["webpackChunkdetail"]=self["webpackChunkdetail"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],function(){return a(4250)});l=a.O(l)})();