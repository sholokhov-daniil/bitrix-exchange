(function(){"use strict";var e={425:function(e,t,a){var l=a(5130),r=a(6768),n=a(144),u=(a(8111),a(1701),a(4232));const o=(e=!0)=>({status:!0===e?"success":"error",data:{},errors:[]}),i=async e=>e?.api?.action?await BX.ajax.runAction(e.api.action,{method:"POST",data:e.api?.data||{}}):new Promise((e=>{e(o())})),s={class:"title"},d={class:"value"},c=["value"];var p={__name:"SelectField",props:{modelValue:{type:[String,Number,Array],required:!0},field:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,o=(0,n.Kh)({enums:[],errors:[]}),p=t;(0,r.sV)((()=>m())),(0,r.wB)((()=>a.field?.api),(()=>m()));const v=(0,r.EW)((()=>a.field?.attributes||{})),f=(0,r.EW)({get(){return a.modelValue},set(e){p("update:modelValue",e)}}),m=()=>{i(a.field).then((e=>{a.field?.api?.callback&&(e=a.field.api?.callback(e)),o.enums=Array.isArray(e.data)?e.data:[]})).catch((e=>o.errors=e.errors.map((e=>e.message))))};return(t,a)=>((0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",s,(0,u.v_)(e.field?.title),1),(0,r.Lk)("div",d,[(0,r.bo)((0,r.Lk)("select",(0,r.v6)({"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e)},v.value),[a[1]||(a[1]=(0,r.Lk)("option",{value:""},"-- Выберите значение --",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.enums,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.value,value:e.value},(0,u.v_)(e.name),9,c)))),128))],16),[[l.u1,f.value]])])]))}};const v=p;var f=v;const m={class:"title"},h={class:"value"},y=["type"];var b={__name:"InputField",props:{modelValue:{type:[String,Number,Array],required:!0},field:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,n=t,o=(0,r.EW)((()=>a.field?.type||"text")),i=(0,r.EW)((()=>a.field?.attributes||{})),s=(0,r.EW)({get(){return a.modelValue},set(e){n("update:modelValue",e)}});return(t,a)=>((0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",m,(0,u.v_)(e.field?.title),1),(0,r.Lk)("div",h,[(0,r.bo)((0,r.Lk)("input",(0,r.v6)({type:o.value},i.value,{"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e)}),null,16,y),[[l.hp,s.value]])])]))}};const k=b;var g=k,V={__name:"CheckboxField",props:{modelValue:{type:[String,Number,Array],required:!0},field:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,l=t,n=(0,r.EW)((()=>{const e={...a.field};return e.type="checkbox",e})),u=(0,r.EW)({get(){return a.modelValue},set(e){l("update:modelValue",e)}});return(e,t)=>((0,r.uX)(),(0,r.Wv)(g,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),field:n.value},null,8,["modelValue","field"]))}};const E=V;var w=E;a(7588);function _(e,t){t?.data?.html&&BX.html(e,t.data.html),t?.assets?.css&&Array.isArray(t.assets.css)&&t.assets.css.forEach(X),t?.assets?.js&&Array.isArray(t.assets.js)&&t.assets.js.forEach(A),t?.data?.assets?.string&&Array.isArray(t.data.assets.string)&&(e.innerHTML+=t.data.assets.string.join(""))}function X(e){BX.loadCSS(e)}function A(e){BX.loadScript(e)}const x={key:0};var C={__name:"ApiField",props:{modelValue:{type:[String,Number,Array],required:!0},field:{type:Object,required:!0}},setup(e){const t=e,a=(0,n.Kh)({errors:[]}),l=(0,n.KR)(null);(0,r.sV)((()=>o())),(0,r.wB)((()=>t.field.api),(()=>{console.log("LOAD")}),{deep:!0});const o=()=>{i(t.field).then((e=>_(l.value,e))).catch((e=>a.errors=e.errors.map((e=>e.message))))};return(t,n)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.eW)((0,u.v_)(e.field)+" ",1),(0,r.Lk)("div",{ref_key:"container",ref:l},null,512),a.errors.length?((0,r.uX)(),(0,r.CE)("div",x,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.errors,(e=>((0,r.uX)(),(0,r.CE)("p",{key:e},(0,u.v_)(e),1)))),128))])):(0,r.Q3)("",!0)],64))}};const F=C;var O=F;const S={selector:"selector",checkbox:"checkbox",api:"api",input:"input"};function j(e){let t;switch(e.view){case S.selector:t=f;break;case S.checkbox:t=w;break;case S.api:t=O;break;case S.input:t=g;break}return t}var W={fields:[{view:S.input,title:"ID импорта:",attributes:{name:"general[hash]"}},{view:S.checkbox,title:"Активность:",attributes:{name:"general[active]"}},{view:S.checkbox,title:"Деактивировать элементы, которые не пришли в импорте:",attributes:{name:"general[deactivate]"}}],userFields:[]},K={__name:"TargetTypeField",props:{hidden:{type:Boolean,default:()=>!1}},emits:["selected"],setup(e,{emit:t}){const a=(0,n.Kh)({field:{title:"Тип обмена: ",type:"hidden",attributes:{name:"general[type]"},api:{action:"sholokhov:exchange.EntityController.getByType",data:{code:"target"},callback:function(e){return Array.isArray(e.data)?(e.data=e.data.map((e=>({value:e.CODE,name:e.NAME}))),e):[]}},value:null}}),l=t;return(0,r.wB)((()=>a.field.value),(e=>l("selected",e))),(t,l)=>e.hidden?((0,r.uX)(),(0,r.Wv)(g,{key:0,modelValue:a.field.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.field.value=e),field:a.field},null,8,["modelValue","field"])):((0,r.uX)(),(0,r.Wv)(f,{key:1,modelValue:a.field.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.field.value=e),field:a.field},null,8,["modelValue","field"]))}};const L=K;var q=L,B={__name:"TargetComponent",props:{id:{type:Number,default:()=>0}},setup(e){const t=(0,n.Kh)(W),a=e=>{BX.ajax.runAction("sholokhov:exchange.EntityController.getFields",{data:{code:e}}).then((e=>t.userFields=Array.isArray(e.data)?e.data:[])).catch((e=>console.error(e)))};return(e,l)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[l[0]||(l[0]=(0,r.Lk)("input",{type:"text",name:"general[name]"},null,-1)),l[1]||(l[1]=(0,r.Lk)("h2",null,"Основные настройки",-1)),(0,r.bF)(q,{onSelected:a}),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.fields,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t},[((0,r.uX)(),(0,r.Wv)((0,r.$y)((0,n.R1)(j)(e)),{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,field:e},null,8,["modelValue","onUpdate:modelValue","field"]))])))),128)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.userFields,((e,t)=>((0,r.uX)(),(0,r.Wv)((0,r.$y)((0,n.R1)(j)(e)),{key:t,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,field:e},null,8,["modelValue","onUpdate:modelValue","field"])))),128))],64))}};const U=B;var T=U;const N={name:"source[type]"};function I(e,t){return(0,r.uX)(),(0,r.CE)("select",N)}var D=a(1241);const P={},M=(0,D.A)(P,[["render",I]]);var R=M,$={__name:"App",props:{id:{type:Number,required:!0},action:{type:String,required:!0}},setup(e){return(t,a)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(T,{id:e.id},null,8,["id"]),(0,r.bF)(R,{id:e.id},null,8,["id"])],64))}};const H=$;var Q=H;window.Sholokhov||(window.Sholokhov={}),window.Sholokhov.Exchange||(window.Sholokhov.Exchange={}),window.Sholokhov.Exchange.Detail||(window.Sholokhov.Exchange.Detail={_app:null,mount(e,t){this.unmount(),this._app=(0,l.Ef)(Q,t),this._app.mount(e)},unmount(){this._app&&this._app.unmount()}})}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,r,n){if(!l){var u=1/0;for(d=0;d<e.length;d++){l=e[d][0],r=e[d][1],n=e[d][2];for(var o=!0,i=0;i<l.length;i++)(!1&n||u>=n)&&Object.keys(a.O).every((function(e){return a.O[e](l[i])}))?l.splice(i--,1):(o=!1,n<u&&(u=n));if(o){e.splice(d--,1);var s=r();void 0!==s&&(t=s)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[l,r,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var r,n,u=l[0],o=l[1],i=l[2],s=0;if(u.some((function(t){return 0!==e[t]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(i)var d=i(a)}for(t&&t(l);s<u.length;s++)n=u[s],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},l=self["webpackChunkdetail"]=self["webpackChunkdetail"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(425)}));l=a.O(l)})();