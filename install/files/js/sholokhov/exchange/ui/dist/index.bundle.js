this.BX=this.BX||{},this.BX.Sholokhov=this.BX.Sholokhov||{},this.BX.Sholokhov.Exchange=this.BX.Sholokhov.Exchange||{},function(e,t){"use strict";function a(e,t,a){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,a)}var i=new WeakMap,l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,e),a(this,i,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldSet(this,i,t)}return babelHelpers.createClass(e,[{key:"has",value:function(e){return null!==this.get(e)}},{key:"get",value:function(e){var t;return null!==(t=babelHelpers.classPrivateFieldGet(this,i)[e])&&void 0!==t?t:null}},{key:"set",value:function(e,t){babelHelpers.classPrivateFieldGet(this,i)[e]=t}},{key:"remove",value:function(e){this.has(e)&&delete babelHelpers.classPrivateFieldGet(this,i)[e]}},{key:"ids",get:function(){return Object.keys(babelHelpers.classPrivateFieldGet(this,i))}}]),e}();function n(e,t){s(e,t),t.add(e)}function r(e,t,a){s(e,t),t.set(e,a)}function s(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}var o=new WeakMap,u=new WeakSet,v=new WeakSet,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,e),n(this,v),n(this,u),r(this,o,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldSet(this,o,t)}return babelHelpers.createClass(e,[{key:"create",value:function(){var e=document.createElement("div"),t=c(this,u,b).call(this);return t&&e.append(t),e.append(c(this,v,d).call(this)),e}},{key:"setAttribute",value:function(e,t){var a=this.attributes;a[e]=t,this.attributes=a}},{key:"name",set:function(e){this.setAttribute("name",e)}},{key:"value",set:function(e){this.setAttribute("value",e)}},{key:"type",set:function(e){this.setAttribute("type",e)}},{key:"attributes",set:function(e){babelHelpers.classPrivateFieldGet(this,o).attributes=e},get:function(){var e;return(null===(e=babelHelpers.classPrivateFieldGet(this,o))||void 0===e?void 0:e.attributes)||{}}}]),e}();function b(){var e=null;return babelHelpers.classPrivateFieldGet(this,o).title&&((e=document.createElement("div")).innerText=babelHelpers.classPrivateFieldGet(this,o).title,e.className="title"),e}function d(){var e=document.createElement("div");e.className="value";var t=document.createElement("input");if("object"===babelHelpers.typeof(babelHelpers.classPrivateFieldGet(this,o).events))for(var a in babelHelpers.classPrivateFieldGet(this,o).events)t[a]=babelHelpers.classPrivateFieldGet(this,o).events[a];for(var i in this.attributes)t.setAttribute(i,this.attributes[i]);return e.append(t),e}var p=function(e){var t,a;if(null==e||null===(t=e.api)||void 0===t||!t.action)return new Promise((function(e){e({status:"success",data:{},errors:[]})}));var i={method:"POST",data:(null===(a=e.api)||void 0===a?void 0:a.data)||{}};return new Promise((function(t,a){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=t&&t.method||(t.method="POST"),BX.ajax.runAction(e,t)})(e.api.action,i).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))};function f(e,t){m(e,t),t.add(e)}function k(e,t,a){m(e,t),t.set(e,a)}function m(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}var H=new WeakMap,w=new WeakSet,P=new WeakSet,F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,e),f(this,P),f(this,w),k(this,H,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldSet(this,H,t)}return babelHelpers.createClass(e,[{key:"create",value:function(){var e=document.createElement("div"),t=y(this,w,G).call(this);return t&&e.append(t),e.append(y(this,P,g).call(this)),e}},{key:"setAttribute",value:function(e,t){var a=this.attributes;a[e]=t,this.attributes=a}},{key:"name",set:function(e){this.setAttribute("name",e)}},{key:"value",set:function(e){this.setAttribute("value",e)}},{key:"attributes",set:function(e){babelHelpers.classPrivateFieldGet(this,H).attributes=e},get:function(){var e;return(null===(e=babelHelpers.classPrivateFieldGet(this,H))||void 0===e?void 0:e.attributes)||{}}}]),e}();function G(){var e=null;return babelHelpers.classPrivateFieldGet(this,H).title&&((e=document.createElement("div")).innerText=babelHelpers.classPrivateFieldGet(this,H).title,e.className="title"),e}function g(){var e=this;document.createElement("div").className="value";var t=document.createElement("select");if(t.add(new Option("-- Выберите значение --","",!0)),"object"===babelHelpers.typeof(babelHelpers.classPrivateFieldGet(this,H).events))for(var a in babelHelpers.classPrivateFieldGet(this,H).events)t[a]=babelHelpers.classPrivateFieldGet(this,H).events[a];for(var i in this.attributes)t.setAttribute(i,this.attributes[i]);return p(babelHelpers.classPrivateFieldGet(this,H)).then((function(a){var i,l;null!==(i=babelHelpers.classPrivateFieldGet(e,H).api)&&void 0!==i&&i.callback&&(a=babelHelpers.classPrivateFieldGet(e,H).api.callback(a));var n=[];Array.isArray(a.data)?n=a.data:Array.isArray(null===(l=babelHelpers.classPrivateFieldGet(e,H))||void 0===l?void 0:l.enums)&&(n=babelHelpers.classPrivateFieldGet(e,H).enums),n.forEach((function(a){var i,l=new Option(a.name,a.value,!1,(null===(i=babelHelpers.classPrivateFieldGet(e,H))||void 0===i?void 0:i.value)===a.value);t.add(l)}))})).catch((function(t){console.error(t),alert('Ошибка получения значений списка "'.concat(babelHelpers.classPrivateFieldGet(e,H).title,'"'))})),t}function S(e,t){C(e,t),t.add(e)}function C(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function E(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}var A=new WeakMap,B=new WeakSet,T=new WeakSet,I=function(){function e(){var t,a,i;babelHelpers.classCallCheck(this,e),S(this,T),S(this,B),i={writable:!0,value:null},C(t=this,a=A),a.set(t,i)}return babelHelpers.createClass(e,[{key:"create",value:function(){var e=this,a=document.createElement("div");a.append(t.Factory.create(t.RenderType.Select,{title:"Тип инфоблока: ",attributes:{name:"target[iblock_type]"},api:{action:"sholokhov:exchange.IBlockController.getTypes",data:{},callback:E(this,T,W)},events:{onchange:function(t){return E(e,B,x).call(e,t)}}}));var i=t.Factory.create(t.RenderType.Select,{title:"Инфоблок: ",attributes:{name:"target[iblock_id]"}});return babelHelpers.classPrivateFieldSet(this,A,i.querySelector("select")),a.append(i),a}}]),e}();function x(e){for(var t=this,a=0;a<babelHelpers.classPrivateFieldGet(this,A).options.length;a++)babelHelpers.classPrivateFieldGet(this,A).options[a].value&&babelHelpers.classPrivateFieldGet(this,A).options[a].remove();e.target.value&&BX.ajax.runAction("sholokhov:exchange.IBlockController.getIBlocks",{method:"POST",data:{parameters:{filter:{IBLOCK_TYPE_ID:e.target.value}}}}).then((function(e){Array.isArray(e.data)&&e.data.forEach((function(e){babelHelpers.classPrivateFieldGet(t,A).add(new Option(e.name,e.id))}))})).catch((function(){return alert("Ошибка загрузка получения инфоблоков")}))}function W(e){return Array.isArray(e.data)&&(e.data=e.data.map((function(e){return{value:e.id,name:e.name}}))),e}var X={Input:"input",Select:"select",IBlockSelector:"iblock-selector"},j={};j[X.Input]=h,j[X.Select]=F,j[X.IBlockSelector]=I;var O=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"create",value:function(){return new l(j)}}]),e}();function z(e,t,a){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,a)}var M=new WeakMap,N=new(function(){function e(){babelHelpers.classCallCheck(this,e),z(this,M,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldSet(this,M,O.create())}return babelHelpers.createClass(e,[{key:"create",value:function(e,t){var a=this.createBuilder(e,t);return a?a.create():null}},{key:"createBuilder",value:function(e,t){var a=babelHelpers.classPrivateFieldGet(this,M).get(e);return a?new a(t):null}}]),e}()),R=O.create();e.Factory=N,e.Registry=R,e.RenderType=X}(this.BX.Sholokhov.Exchange.UI=this.BX.Sholokhov.Exchange.UI||{},BX.Sholokhov.Exchange.UI);
//# sourceMappingURL=index.bundle.js.map
