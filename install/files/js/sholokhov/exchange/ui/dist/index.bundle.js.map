{"version":3,"file":"index.bundle.js","sources":["../src/util/container/index.ts","../src/render/abstractItem.ts","../src/render/input.ts","../src/render/checkbox.ts","../src/util/http/field.ts","../src/util/http/curl.ts","../src/render/select.ts","../src/render/entitySelector.ts","../src/render/iblockProperty.ts","../src/render/ufProperty.ts","../src/config/render/index.js","../src/util/builder/RenderRegistry.ts","../src/util/factory/render.ts","../src/index.js"],"sourcesContent":["/**\n * Хранилище произвольных данных\n *\n * @since 1.2.0\n * @version 1.2.0\n */\nexport class Registry {\n    /**\n     * Данные хранилища\n     *\n     * @type {object}\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    #data: object;\n\n    /**\n     *\n     * @param data {object} Данные хранилища\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    constructor(data: object = {}) {\n        this.#data = data;\n    }\n\n    /**\n     * Проверка наличия значения в контейнере\n     *\n     * @return {boolean}\n     * @param id {string|number}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    has(id: string|number): boolean {\n        return this.get(id) !== null;\n    }\n\n    /**\n     * Получение значения\n     *\n     * @return {any}\n     * @param id {string|number}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    get(id: string|number): any|null {\n        return this.#data[id] ?? null;\n    }\n\n    /**\n     * Установить значение\n     *\n     * @param id {string|number}\n     * @param value {any}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set(id: string|number, value: any): void {\n        this.#data[id] = value;\n    }\n\n    /**\n     * Удаление значения по ID\n     *\n     * @param id {string|number}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    remove(id: string|number): void {\n        if (this.has(id)) {\n            delete this.#data[id];\n        }\n    }\n\n    /**\n     * Получение доступных ключей\n     *\n     * @return {Array<number|string>}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    get ids() {\n        return Object.keys(this.#data);\n    }\n}","import {SimpleItem} from \"../interfaces/render/simpleItem.d.ts\";\nimport {Options} from \"../interfaces/render/options/options.d.ts\";\n\nexport class AbstractItem implements SimpleItem {\n    /**\n     * Контейнер с данными\n     *\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _container: HTMLTableRowElement;\n\n    /**\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _titleCell: HTMLTableCellElement;\n\n    /**\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _valueCell: HTMLTableCellElement;\n\n    /**\n     * Создание контейнера значения\n     *\n     * @param options\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _createValue(options: Options): HTMLElement {};\n\n    /**\n     * @param options {Options} Конфигурация элемента\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    constructor(options: Options) {\n        this._create(options);\n    }\n\n    /**\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    get titleCell() {\n        return this._titleCell;\n    }\n\n    /**\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    get valueCell() {\n        return this._valueCell;\n    }\n\n    /**\n     * Получение DOM элемента\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    getContainer(): HTMLTableRowElement {\n        return this._container;\n    }\n\n    /**\n     * Создание DOM элемента\n     *\n     * @param options\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _create(options: Options): void {\n        this._container = document.createElement('tr');\n\n        this._titleCell = document.createElement('td');\n        this._titleCell.width = \"40%\";\n        this._titleCell.className = 'adm-detail-content-cell-l';\n        this._titleCell.innerText = BX.message(options?.title);\n\n        this._valueCell = document.createElement('td');\n        this._valueCell.width = \"60%\"\n        this._valueCell.className = 'adm-detail-content-cell-r';\n        this._valueCell.append(this._createValue(options));\n\n        this.getContainer().append(this._titleCell);\n        this.getContainer().append(this._valueCell);\n    }\n}","import {AbstractItem} from './abstractItem.ts';\nimport {Options} from \"../interfaces/render/options/options.d.ts\";\n\n/**\n * @since 1.2.0\n * @version 1.2.0\n */\nexport class Input extends AbstractItem {\n    /**\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _input: HTMLInputElement;\n\n    /**\n     * Указание атрибута\n     *\n     * @param key\n     * @param value\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    setAttribute(key: string, value: any): void {\n        this._input.setAttribute(key, value);\n    }\n\n    /**\n     * Указание наименования элемента\n     *\n     * @param name {string}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set name(name: string) {\n        this.setAttribute('name', name);\n    }\n\n    /**\n     * Указание значения инпута\n     *\n     * @param value {string}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set value(value: string) {\n        this._input.value = value;\n    }\n\n    /**\n     * Получение значения\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    get value(): any {\n        return this._input.value;\n    }\n\n    /**\n     * Указание типа значения\n     *\n     * @param type {string}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set type(type: string) {\n        this._input.type = type;\n    }\n\n    /**\n     * Указание атрибутов\n     *\n     * @param attributes\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set attributes(attributes: object) {\n        for (let name in attributes) {\n            this._input.setAttribute(name, attributes[name]);\n        }\n    }\n\n    /**\n     * Получение доступных атрибутов\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    get attributes(): object {\n        const attributes = {};\n        this._input.getAttributeNames().forEach(name => attributes[name] = this._input.getAttribute(name));\n\n        return attributes;\n    }\n\n    /**\n     * Создание хранилища данных\n     *\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _createValue(options: Options): HTMLElement {\n        const container = document.createElement('div');\n        container.className = 'ui-ctl ui-ctl-textbox';\n\n        this._input = document.createElement('input');\n        this._input.className = 'ui-ctl-element';\n\n        if (options.events) {\n            for (let eventName in options.events) {\n                this._input[eventName] = options.events[eventName];\n            }\n        }\n\n        if (options.attributes) {\n            for (let name in options.attributes) {\n                this._input.setAttribute(name, options.attributes[name]);\n            }\n        }\n\n        container.append(this._input);\n\n        return container;\n    }\n}","import {AbstractItem} from './abstractItem.ts';\nimport {Options} from \"../interfaces/render/options/options.d.ts\";\n\n/**\n * @since 1.2.0\n * @version 1.2.0\n */\nexport class Checkbox extends AbstractItem {\n    /**\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _input: HTMLInputElement;\n\n    /**\n     * Указание атрибута\n     *\n     * @param key\n     * @param value\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    setAttribute(key: string, value: any): void {\n        this._input.setAttribute(key, value);\n    }\n\n    /**\n     * Указание наименования элемента\n     *\n     * @param name {string}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set name(name: string) {\n        this.setAttribute('name', name);\n    }\n\n    /**\n     * Указание значения инпута\n     *\n     * @param value {string}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set value(value: string) {\n        this._input.value = value;\n    }\n\n    /**\n     * Получение значения\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    get value(): any {\n        return this._input.value;\n    }\n\n    /**\n     * Указание типа значения\n     *\n     * @param type {string}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set type(type: string) {\n        this._input.type = type;\n    }\n\n    /**\n     * Указание атрибутов\n     *\n     * @param attributes\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set attributes(attributes: object) {\n        for (let name in attributes) {\n            this._input.setAttribute(name, attributes[name]);\n        }\n    }\n\n    /**\n     * Получение доступных атрибутов\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    get attributes(): object {\n        const attributes = {};\n        this._input.getAttributeNames().forEach(name => attributes[name] = this._input.getAttribute(name));\n\n        return attributes;\n    }\n\n    /**\n     * Создание хранилища данных\n     *\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _createValue(options: Options): HTMLElement {\n        const container = document.createElement('label');\n        container.className = 'ui-ctl ui-ctl-checkbox';\n\n        this._input = document.createElement('input');\n        // this._input.className = 'ui-ctl-element';\n\n        if (options.events) {\n            for (let eventName in options.events) {\n                this._input[eventName] = options.events[eventName];\n            }\n        }\n\n        if (options.attributes) {\n            for (let name in options.attributes) {\n                this._input.setAttribute(name, options.attributes[name]);\n            }\n        }\n\n        this._input.type = 'checkbox';\n\n        container.append(this._input);\n\n        return container;\n    }\n}","import {createResponse, curl} from \"../http/curl.ts\";\n\nexport const query = (field): Promise<object> => {\n    if (!field?.api?.action) {\n        return new Promise((resolve) => {\n            resolve(createResponse())\n        });\n    }\n\n    const parameters = {\n        method: 'POST',\n        data: field.api?.data || {}\n    };\n\n    return new Promise((resolve, reject) => {\n        curl(field.api.action, parameters)\n            .then(response => resolve(response))\n            .catch(response => reject(response));\n    });\n}","export const curl = (action: string, parameters: object = {}): BX.Promise => {\n    if (!parameters?.method) {\n        parameters.method = 'POST';\n    }\n\n    return BX.ajax.runAction(action, parameters)\n}\n\nexport const createErrorResponse = (data: object = {}, errors: Array<object> = []): {status: string, data: object, errors: Array<object>} => {\n    const response = createResponse();\n    response.status = 'error';\n    response.data = data;\n    response.errors = errors;\n\n    return response;\n}\n\nexport const createResponse = (): {status: string, data: object, errors: Array<object>} => ({\n    status: \"success\",\n    data: {},\n    errors: []\n});\n\nexport const createError = (message: string, code: string|number = null): {message: string, code: string|number|null} => ({\n    message: message,\n    code: code,\n});","import {query} from \"../util/http/field.ts\";\nimport {AbstractItem} from \"./abstractItem.ts\";\nimport {Enumeration, SelectOptions} from \"../interfaces/render/options/select.d.ts\";\nimport {Select as SelectInterface} from '../interfaces/render/select.d.ts';\n\nexport class Select extends AbstractItem implements SelectInterface {\n\n    /**\n     * Список значений\n     *\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _select: HTMLSelectElement;\n\n    /**\n     * @param option {Option}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    addOption(option: Option): void {\n        this._select.add(option);\n    }\n\n    /**\n     * Удаление значения по индексу\n     *\n     * @param index {number}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    removeOption(index: number): void {\n        this._select.options.remove(index);\n    }\n\n    /**\n     * Удаление всех значений списка\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    removeAllOptions(): void {\n        this._select.options.length = 0;\n    }\n\n    /**\n     * Получение коллекции значений списка\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    getOptions(): HTMLOptionsCollection {\n        return this._select.options;\n    }\n\n    /**\n     * @param index {number}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    getOption(index: number) {\n        return this._select.options.item(index);\n    }\n\n    /**\n     * Указание атрибута\n     *\n     * @param key\n     * @param value\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    setAttribute(key: string, value: any): void {\n        this._select.setAttribute(key, value);\n    }\n\n    /**\n     * Указание наименования элемента\n     *\n     * @param name {string}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set name(name: string) {\n        this.setAttribute('name', name);\n    }\n\n    /**\n     * Указание значения инпута\n     *\n     * @param value {string}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set value(value: string) {\n        this.setAttribute('value', value);\n    }\n\n    /**\n     * Указание атрибутов\n     *\n     * @param attributes\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    set attributes(attributes: object) {\n        for (let name in attributes) {\n            this._select.setAttribute(name, attributes[name]);\n        }\n    }\n\n    /**\n     * Получение доступных атрибутов\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    get attributes(): object {\n        const attributes = {};\n        this._select.getAttributeNames().forEach(name => attributes[name] = this._select.getAttribute(name));\n        \n        return attributes;\n    }\n    \n    /**\n     * Создание контейнера списка значений\n     *\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _createValue(options: SelectOptions): HTMLDivElement {\n        const container = document.createElement('div');\n        container.className = 'ui-ctl ui-ctl-after-icon ui-ctl-dropdown';\n\n        const angle = document.createElement('div');\n        angle.className = 'ui-ctl-after ui-ctl-icon-angle';\n        container.append(angle);\n\n        this._select = document.createElement('select');\n        this._select.className = 'ui-ctl-element';\n        this._select.add(new Option('-- Выберите значение --', '', true));\n\n        if (typeof options.events === 'object') {\n            for (let eventName in options.events) {\n                this._select[eventName] = options.events[eventName];\n            }\n        }\n\n        for(let name in this.attributes) {\n            this._select.setAttribute(name, this.attributes[name]);\n        }\n\n        query(options)\n            .then(response => {\n                if (options.api?.callback) {\n                    response = options.api.callback(response);\n                }\n\n                let enums = [];\n\n                if (Array.isArray(response.data)) {\n                    enums = response.data;\n                } else if (Array.isArray(options?.enums)) {\n                    enums = options.enums;\n                }\n\n                enums.forEach((item: Enumeration) => {\n                    this.addOption(\n                        new Option(item.name, item.value, false)\n                    )\n                })\n            })\n            .catch(response => {\n                console.error(response);\n                alert(`Ошибка получения значений списка \"${options.title}\"`);\n            })\n\n        container.append(this._select);\n\n        return container;\n    }\n}","import {TagSelector} from 'ui.entity-selector';\nimport {AbstractItem} from \"./abstractItem.ts\";\nimport {EntitySelectorOptions} from '../interfaces/render/options/entitySelector.d.ts'\n\n/**\n * Генератор списка элементов сущности\n *\n * @since 1.2.0\n * @version 1.2.0\n */\nexport class EntitySelector extends AbstractItem {\n    /**\n     * Объект списка\n     *\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _selector: TagSelector;\n\n    constructor(options: EntitySelectorOptions) {\n        super(options);\n    }\n\n    /**\n     * Создание списка сущностей\n     *\n     * @param options {EntitySelectorOptions}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _createValue(options: EntitySelectorOptions): HTMLElement {\n        const container = document.createElement('div');\n\n        if (options?.selector?.addButtonCaption) {\n            options.selector.addButtonCaption = BX.message(options.selector.addButtonCaption) || options.selector.addButtonCaption;\n        }\n\n        this._selector = new TagSelector(options?.selector || {});\n        this.selector.renderTo(container);\n\n        return container;\n    }\n\n    /**\n     * @return {TagSelector}\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    get selector(): TagSelector {\n        return this._selector;\n    }\n}","import {Item} from \"../interfaces/render/item.d.ts\";\nimport {EntitySelector} from \"./entitySelector.ts\";\nimport {TagEvent} from \"../interfaces/render/entity-selector/events/tagSelector.d.ts\";\n\n/**\n * Селектор выбора свойств определенного инфоблока\n *\n * @internal\n *\n * @since 1.2.0\n * @version 1.2.0\n */\nexport class IBlockProperty implements Item {\n    /**\n     * Контейнер списков\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _container: HTMLElement;\n\n    /**\n     * Список инфоблоков\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _iBlock: EntitySelector;\n\n    /**\n     * Список свойств\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _property: EntitySelector;\n\n    _options: object;\n\n    constructor(options) {\n        this._options = options;\n    }\n\n    /**\n     * Получение контейнера списков\n     *\n     * @return {HTMLElement}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    getContainer(): HTMLElement {\n        return this._container ??= this._create();\n    }\n\n    /**\n     * Инициализация контейнера списка свойств\n     *\n     * @return {HTMLElement}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _create(): HTMLElement {\n        const container = document.createElement('div');\n        container.append(this._createIBlockSelector().getContainer());\n\n        return container;\n    }\n\n    /**\n     * Выбран инфоблок\n     *\n     * @return {void}\n     * @param event {TagEvent}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _iBlockSelected(event: TagEvent): void {\n        this._property?.getContainer()?.remove();\n        this._createPropertySelector(event.data.tag.id);\n        this._container.append(this._property.getContainer());\n    }\n\n    /**\n     * Удален выбор инфоблока\n     *\n     * @return {void}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _iBlockRemove(event: TagEvent): void {\n        if (!event.target?.tags?.length) {\n            this._property?.getContainer()?.remove();\n        }\n    }\n\n    /**\n     * Создание селектора инфоблоков\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _createIBlockSelector(): EntitySelector {\n        return this._iBlock = new EntitySelector({\n            title: 'SHOLOKHOV_EXCHANGE_SETTINGS_UI_TITLE_RENDER_IBLOCK_SELECT_IBLOCK',\n            selector: {\n                multiple: false,\n                addButtonCaption: 'SHOLOHKOV_EXCHANGE_UI_ENTITY_SELECTOR_DIALOG_ADD_BUTTON_CAPTION_SELECT',\n                dialogOptions: {\n                    entities: [\n                        {\n                            id: 'sholokhov-exchange-iblock',\n                            dynamicSearch: true,\n                            dynamicLoad: true,\n                        }\n                    ]\n                },\n                events: {\n                    onAfterTagAdd: (event: TagEvent) => this._iBlockSelected(event),\n                    onAfterTagRemove: (event: TagEvent) => this._iBlockRemove(event),\n                }\n            }\n        });\n    }\n\n    /**\n     * Создание селектора свойств инфоблока\n     *\n     * @param iblockId {number}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _createPropertySelector(iblockId: number = 0): EntitySelector {\n        return this._property = new EntitySelector({\n            title: 'SHOLOKHOV_EXCHANGE_UI_ENTITY_PROPERTY_SELECTOR',\n            selector: {\n                multiple: false,\n                addButtonCaption: 'SHOLOHKOV_EXCHANGE_UI_ENTITY_SELECTOR_DIALOG_ADD_BUTTON_CAPTION_SELECT',\n                dialogOptions: {\n                    entities: [\n                        {\n                            id: 'sholokhov-exchange-iblock-property',\n                            dynamicSearch: true,\n                            dynamicLoad: true,\n                            options: {\n                                iblockId: iblockId,\n                                nameTemplate: '#NAME# (#CODE#)',\n                                ...this._options?.property?.api || {}\n                            }\n                        }\n                    ]\n                }\n            }\n        });\n    }\n}","import {Item} from \"../interfaces/render/item.d.ts\";\nimport {EntitySelector} from \"./entitySelector.ts\";\nimport {TagEvent} from \"../interfaces/render/entity-selector/events/tagSelector.d.ts\";\n\n/**\n * Селектор выбора пользовательских свойств определенного инфоблока\n *\n * @internal\n *\n * @since 1.2.0\n * @version 1.2.0\n */\nexport class UFProperty implements Item {\n    /**\n     * Контейнер списков\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _container: HTMLElement;\n\n    /**\n     * Список инфоблоков\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _iBlock: EntitySelector;\n\n    /**\n     * Список свойств\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _property: EntitySelector;\n\n    /**\n     * Получение контейнера списков\n     *\n     * @return {HTMLElement}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    getContainer(): HTMLElement {\n        return this._container ??= this._create();\n    }\n\n    /**\n     * Инициализация контейнера списка свойств\n     *\n     * @return {HTMLElement}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _create(): HTMLElement {\n        const container = document.createElement('div');\n        container.append(this._createIBlockSelector().getContainer());\n\n        return container;\n    }\n\n    /**\n     * Выбран инфоблок\n     *\n     * @return {void}\n     * @param event {TagEvent}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _iBlockSelected(event: TagEvent): void {\n        this._property?.getContainer()?.remove();\n        this._createPropertySelector(event.data.tag.id);\n        this._container.append(this._property.getContainer());\n    }\n\n    /**\n     * Удален выбор инфоблока\n     *\n     * @return {void}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _iBlockRemove(event: TagEvent): void {\n        if (!event.target?.tags?.length) {\n            this._property?.getContainer()?.remove();\n        }\n    }\n\n    /**\n     * Создание селектора инфоблоков\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _createIBlockSelector(): EntitySelector {\n        return this._iBlock = new EntitySelector({\n            title: 'SHOLOKHOV_EXCHANGE_SETTINGS_UI_TITLE_RENDER_IBLOCK_SELECT_IBLOCK',\n            selector: {\n                multiple: false,\n                addButtonCaption: 'SHOLOHKOV_EXCHANGE_UI_ENTITY_SELECTOR_DIALOG_ADD_BUTTON_CAPTION_SELECT',\n                dialogOptions: {\n                    entities: [\n                        {\n                            id: 'sholokhov-exchange-iblock',\n                            dynamicSearch: true,\n                            dynamicLoad: true,\n                        }\n                    ]\n                },\n                events: {\n                    onAfterTagAdd: (event: TagEvent) => this._iBlockSelected(event),\n                    onAfterTagRemove: (event: TagEvent) => this._iBlockRemove(event),\n                }\n            }\n        });\n    }\n\n    /**\n     * Создание селектора свойств инфоблока\n     *\n     * @param iblockId {number}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    _createPropertySelector(iblockId: number): EntitySelector {\n        return this._property = new EntitySelector({\n            title: 'SHOLOKHOV_EXCHANGE_UI_ENTITY_PROPERTY_SELECTOR',\n            selector: {\n                multiple: false,\n                addButtonCaption: 'SHOLOHKOV_EXCHANGE_UI_ENTITY_SELECTOR_DIALOG_ADD_BUTTON_CAPTION_SELECT',\n                dialogOptions: {\n                    entities: [\n                        {\n                            id: 'sholokhov-exchange-user-field',\n                            dynamicSearch: true,\n                            dynamicLoad: true,\n                            options: {\n                                entityId: `IBLOCK_${iblockId}_SECTION`,\n                                nameTemplate: '#LIST_COLUMN_LABEL# (#FIELD_NAME#)',\n                                ...this._options?.property?.api || {}\n                            }\n                        }\n                    ]\n                }\n            }\n        });\n    }\n}","import {Input} from '../../render/input.ts';\nimport {Checkbox} from '../../render/checkbox.ts';\nimport {Select} from \"../../render/select.ts\";\nimport {EntitySelector} from \"../../render/entitySelector.ts\";\nimport {IBlockProperty} from \"../../render/iblockProperty.ts\";\nimport {UFProperty} from \"../../render/ufProperty.ts\";\n\nconst Type = {\n    Input: 'input',\n    Checkbox: 'checkbox',\n    Select: 'select',\n    EntitySelector: 'entity-selector',\n    IBlockProperty: 'iblock-property',\n    UfProperty: 'uf-property',\n};\n\nconst Map = {};\n\nMap[Type.Input] = Input;\nMap[Type.Checkbox] = Checkbox;\nMap[Type.Select] = Select;\nMap[Type.EntitySelector] = EntitySelector;\nMap[Type.IBlockProperty] = IBlockProperty;\nMap[Type.UfProperty] = UFProperty;\n\nexport {Type, Map};","import {Registry} from \"../container/index.ts\";\nimport {Map} from '../../config/render';\n\nexport class RenderRegistry {\n    static create(): Registry {\n        return new Registry(Map);\n    }\n}","import {Registry} from \"../container/index.ts\";\nimport {Item} from \"../../interfaces/render/item.d.ts\"\nimport {RenderRegistry} from \"../builder/RenderRegistry.ts\";\n\n/**\n * @since 1.2.0\n * @version 1.2.0\n */\nexport default class {\n    /**\n     * Хранилище сборщиков интерфейса\n     *\n     * @private\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    #registry: Registry;\n\n    /**\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    constructor() {\n        this.#registry = RenderRegistry.create();\n    }\n\n    /**\n     * Создание DOM элемента\n     *\n     * @param type {string|number}\n     * @param options {object}\n     *\n     * @since 1.2.0\n     * @version 1.2.0\n     */\n    create(type: string|number, options: object): Item|null {\n        const item = this.#registry.get(type);\n\n        if (!item) {\n            return null;\n        }\n\n        return new item(options);\n    }\n}","import RenderFactory from \"./util/factory/render.ts\";\nimport {Type as RenderType} from './config/render';\nimport {RenderRegistry} from \"./util/builder/RenderRegistry.ts\";\nimport 'ui.forms';\n\nconst Factory = new RenderFactory;\nconst Registry = RenderRegistry.create();\n\nexport {Factory, Registry, RenderType}\n"],"names":["Registry","data","babelHelpers","_classPrivateFieldInitSpec","writable","value","key","id","this","get","has","Object","keys","AbstractItem","options","_create","_container","document","createElement","_titleCell","width","className","innerText","BX","message","title","_valueCell","append","_createValue","getContainer","Input","_input","setAttribute","container","events","eventName","attributes","name","set","type","getAttributeNames","forEach","_this","getAttribute","Checkbox","query","field","api","_field$api","action","Promise","resolve","status","errors","parameters","method","_field$api2","reject","ajax","runAction","curl","then","response","Select","option","_select","add","index","remove","length","item","angle","Option","_options$api","callback","enums","Array","isArray","addOption","console","error","alert","_this2","EntitySelector","selector","_options$selector","addButtonCaption","_selector","TagSelector","renderTo","IBlockProperty","_options","_createIBlockSelector","event","_property","_this$_property","_this$_property$getCo","_createPropertySelector","tag","target","_event$target","tags","_event$target$tags","_this$_property2","_this$_property2$getC","_iBlock","multiple","dialogOptions","entities","dynamicSearch","dynamicLoad","onAfterTagAdd","_iBlockSelected","onAfterTagRemove","_iBlockRemove","iblockId","nameTemplate","_this$_options","property","_this$_options$proper","UFProperty","entityId","Type","UfProperty","Map","RenderRegistry","Factory","create"],"mappings":"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"}